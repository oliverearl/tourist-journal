<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>I'm a Tourist Application</title>

  <!-- HTML5 Shiv for non-supporting browsers. -->
  <!--[if lt IE 9]>
  <script src="lib/html5shiv.js" type="application/javascript" ></script>
  <![endif]-->

  <!-- Stylesheets, starting with jQuery Mobile, in mobile-first order -->
  <link href="lib/jqm/jquery.mobile-1.4.5.min.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" type="text/css" href="css/conference-mobile-first.css"/>
  <link rel="stylesheet" type="text/css" href="css/conference-mid-size-screens.css"
        media="all and (min-width: 527px) and (max-width: 684px)"/>
  <link rel="stylesheet" type="text/css" href="css/conference-large-screens.css"
        media="all and (min-width: 685px)"/>

  <!-- Shiv for those lacking both JavaScript and Media Query support -->
  <!--[if (lt IE 9)&(!IEMobile)]>
  <link rel="stylesheet" type="text/css" href="css/conference-large-screens.css" media="all"/>
  <![endif]-->

  <!-- Scripts -->
  <!-- Libraries -->
  <script src="lib/jq/jquery-1.12.0.min.js" type="application/javascript"></script>
  <script src="cordova.js" type="application/javascript"></script> <!-- If PhoneGap/Cordova library present -->
  <script src="lib/yqlgeo/yqlgeo.js" type="application/javascript"></script>

  <!-- Application Files -->
  <script src="app/DataContext.js" type="application/javascript"></script>
  <script src="app/Controller.js" type="application/javascript"></script>

  <!-- jQuery Mobile comes after my own source code. I have no f***ing idea why. This caused me so much pain. -->
  <script src="lib/jqm/jquery.mobile-1.4.5.min.js" type="application/javascript"></script>
  <!-- jQuery Validation Plugin -->
  <script src="lib/jqv/jquery.validate.min.js" type="application/javascript"></script>
</head>
<body>

<!-- Homepage -->
<article id="home_page" role="document" aria-live="assertive" aria-atomic="true" data-role="page">
  <header class="page_header" role="banner" data-role="header" data-theme="b" data-position="fixed">
    <div class="logo">
      <img src="res/logo.png" alt="I'm a Tourist Logo"/>
    </div>
    <div>
      <h1>I'm a Tourist!</h1>
    </div>
  </header>

  <section data-role="content">
    <section id="main_text" role="main">
      <header>
        <h2>All About This App</h2>
      </header>
      <p>
        For your convenience, I've laid out the features that are absolutely working, and those that aren't
        in the following bullet points. Of course, I go into a lot more detail in the write-up, but this should
        hopefully help the marking process.
      </p>
      <p>
        This is of course is to the best of my knowledge and my testing, and I've tried to be as thorough as I can be.
        The code is also really well commented, so feel free to look in there if you want to get more context on
        something. If I've missed anything, it's because of human mistake, sorry!
      </p>
      <p>
        Record List Functionality <strong>100% complete with some slight quirks</strong>
      </p>
      <ul>
        <li>Tourists can add notes in a text area.</li>
        <li>There must be a button to allow the tourist to open the camera and take a picture.</li>
        <li>The tourist can see the image on the page and can then decide whether to save or cancel the page entry.</li>
        <li>The tourist should be able to take the picture again if they are not happy with the first attempt.</li>
        <li>The saved data is then saved in the database.</li>
      </ul>
      <p></p>
      <p>Record List Quirks and Issues</p>
      <ul>
        <li>The camera button only allows for image upload on Phonegap/Cordova and on desktop. On mobile browsers, it allows for camera usage as expected.</li>
        <li>Should geolocation fail, or be refused permission, the app will generate a random (but semantically correct) set of coordinates.</li>
      </ul>
      <p></p>
      <p>List Visits Functionality <strong>100% complete with a minor quirk</strong></p>
      <ul>
        <li>This displays a list of visits in date/time order.</li>
        <li>A filter field should be included.</li>
        <li>Each row should show the date/time, the short description, and a thumbnail image.</li>
        <li>Clicking on the short description replaces the page with the full description.</li>
      </ul>
      <p></p>
      <p>List Visits Quirks and Issues</p>
      <ul>
        <li>On Phonegap/Cordova and on mobile browsers, the ordering of entries is correct. On desktop, it is back-to-front.</li>
      </ul>
      <p></p>
      <p>Map Functionality <strong>80% complete with a significant bug</strong></p>
      <p>
        Paragraph for explanation here. The map loads on Phonegap/Cordova only, and not on mobile browsers or on desktop.
        The pins do not render properly due to what I suspect is a scope problem where data is not being correctly returned
        to the calling function, and leaving an array uninitialised. The fallback is to leave a default entry for the person's
        current location without adding the other locations. The algorithm for generating the pins is present and working, but
        because data isn't being passed correctly, it doesn't fully work. If the data could be passed properly, <strong>
        it would be fully working.</strong>
      </p>
      <p>Flair</p>
      <ul>
        <li>Real Twitter embed included on the homepage, but doesn't always work on Phonegap/Cordova due to Android security settings.</li>
        <li>The use of the jQuery Mobile Validation library alongside HTML5 validation.</li>
        <li>Use of HTML5 APIs and ES6 JavaScript where possible.</li>
      </ul>
    </section>
    <section id="twitter_output" role="complementary">
      <a class="twitter-timeline"
         data-lang="en"
         data-height="500"
         data-theme="light"
         href="https://twitter.com/notoliverearl?ref_src=twsrc%5Etfw">
        Developer's Tweets:
      </a>
      <script async src="https://platform.twitter.com/widgets.js" charset="utf-8" type="application/javascript"></script>
    </section>
  </section>

  <footer data-role="footer" data-position="fixed" data-theme="b">
    <nav data-role="navbar">
      <ul>
        <li>
          <a href="#home_page" class="ui-btn-active ui-state-persist" data-role="tab" data-icon="home">Home</a>
        </li>
        <li>
          <a href="#add" data-role="tab" data-icon="plus">Add Entry</a>
        </li>
        <li>
          <a href="#entries" data-role="tab" data-icon="bars">List Entries</a>
        </li>
        <li>
          <a href="#map" data-role="tab" data-icon="location">Map</a>
        </li>
      </ul>
    </nav>
  </footer>
</article>
<!-- End Homepage -->

<!-- Add Entry -->
<article id="add" role="document" aria-live="assertive" aria-atomic="true" data-role="page">
  <header class="page_header" role="banner" data-role="header" data-theme="b" data-position="fixed">
    <div class="logo">
      <img src="res/logo.png" alt="I'm a Tourist Logo"/>
    </div>
    <div>
      <h1>I'm a Tourist!</h1>
    </div>
  </header>

  <section data-role="content">
    <section id="add_entry_text" role="main">
      <header>
        <h2>Add Entry</h2>
      </header>
      <!-- TODO: Add Entry Form -->
      <form class="ui-content" id="entry-form" name="entry-form">
        <!-- <script src="app/CordovaPhotoController.js" type="application/javascript"></script> -->
        <div class="ui-textinput ui-corner-all ui-shadow-inset ui-textinput-text ui-body-inherit" data-role="fieldcontain">
          <label for="entry-name">Name of Entry:</label>
          <input type="text" name="entry-name" id="entry-name"
                 class="ui-input-text ui-body-b ui-corner-all ui-shadow-inset"
                 placeholder="Go somewhere nice?" minlength="5" maxlength="100" required>
        </div>
        <div class="ui-textinput ui-corner-all ui-shadow-inset ui-textinput-text ui-body-inherit" data-role="fieldcontain">
          <label for="entry-notes">Description:</label>
          <textarea name="entry-notes" id="entry-notes"
                    class="ui-input-text ui-body-b ui-corner-all ui-shadow-inset"
                    placeholder="How was your visit?" minlength="5" maxlength="600" required></textarea>
        </div>
        <div class="ui-checkbox ui-corner-all ui-shadow-inset ui-textinput-text ui-body-inherit" data-role="fieldcontain">
          <label for="entry-geolocation-toggle">Include Geolocation?</label>
          <input type="checkbox" name="entry-geolocation-toggle" id="entry-geolocation-toggle"
                 class="ui-checkbox ui-body-b ui-corner-all ui-shadow-inset" onchange="handleGeolocation();">
          <input type="hidden" name="entry-geolocation" id="entry-geolocation" value="null">
        </div>
        <div id="camera-control" class="ui-textinput ui-corner-all ui-shadow-inset ui-textinput-text ui-body-inherit" data-role="fieldcontain">
          <img class="ui-mobile" id="img-preview" src="res/logo.png" alt="Photo Preview" title="Photo Preview" height="200" width="200">
          <!-- <button id="entry-camera" onclick="capturePhoto();">Take Photo</button> -->
          <!-- <button id="entry-gallery" onclick="getPhoto(pictureSource.PHOTOLIBRARY);">Upload Photo</button> -->
          <!-- <script src="app/HTML5onDesktop.js"type="application/javascript"></script> -->
        </div>
        <input type="file" accept="image/*" id="files" name="files[]" capture="camera" required>
        <div id="clear-button-area"></div>
        <script src="app/PhotoController.js" type="application/javascript"></script>
        <script src="app/GeolocationController.js" type="application/javascript"></script>
        <script src="app/Validation.js" type="application/javascript"></script>
        <button name="entry-submit" id="entry-submit">Add Entry</button>
      </form>
    </section>
  </section>

  <footer data-role="footer" data-position="fixed" data-theme="b">
    <nav data-role="navbar">
      <ul>
        <li>
          <a href="#home_page" data-role="tab" data-icon="home">Home</a>
        </li>
        <li>
          <a href="#add" class="ui-btn-active ui-state-persist" data-role="tab" data-icon="plus">Add Entry</a>
        </li>
        <li>
          <a href="#entries" data-role="tab" data-icon="bars">List Entries</a>
        </li>
        <li>
          <a href="#map" data-role="tab" data-icon="location">Map</a>
        </li>
      </ul>
    </nav>
  </footer>
</article>
<!-- End Add Entry -->

<!-- Add List Entries -->
<article id="entries" role="document" aria-live="assertive" aria-atomic="true" data-role="page">
  <header class="page_header" role="banner" data-role="header" data-theme="b" data-position="fixed">
    <div class="logo">
      <img src="res/logo.png" alt="I'm a Tourist Logo"/>
    </div>
    <div>
      <h1>I'm a Tourist!</h1>
    </div>
  </header>

  <section data-role="content">
    <section id="entries_text" role="main">
      <header>
        <h2>List Entries</h2>
      </header>
      <section data-role="content" class="indexPos" id="entries-list-content">

      </section>
    </section>
  </section>

  <footer data-role="footer" data-position="fixed" data-theme="b">
    <nav data-role="navbar">
      <ul>
        <li>
          <a href="#home_page" data-role="tab" data-icon="home">Home</a>
        </li>
        <li>
          <a href="#add" data-role="tab" data-icon="plus">Add Entry</a>
        </li>
        <li>
          <a href="#entries" class="ui-btn-active ui-state-persist"  data-role="tab" data-icon="bars">List Entries</a>
        </li>
        <li>
          <a href="#map" data-role="tab" data-icon="location">Map</a>
        </li>
      </ul>
    </nav>
  </footer>
</article>
<!-- End List Entries -->

<!-- Entry Details -->
<article id="details" role="document" aria-live="assertive" aria-atomic="true" data-role="page">
  <header class="page_header" role="banner" data-role="header" data-theme="b" data-position="fixed">
    <div class="logo">
      <img src="res/logo.png" alt="I'm a Tourist Logo"/>
    </div>
    <div>
      <h1>I'm a Tourist!</h1>
    </div>
  </header>

  <section id="entry_main_text" role="main">
    <header>
      <h2 id="details-name"></h2>
      <h3 id="details-date_of_entry"></h3>
      <h3 id="details-geolocation"></h3>
    </header>
    <hr>
    <p><img id="details-img" src="" alt="" title="" height="400" width="400"></p>
    <p id="details-notes"></p>
    <script src="app/Details.js" type="application/javascript"></script>
  </section>

  <footer data-role="footer" data-position="fixed" data-theme="b">
    <nav data-role="navbar">
      <ul>
        <li>
          <a href="#home_page" data-role="tab" data-icon="home">Home</a>
        </li>
        <li>
          <a href="#add" data-role="tab" data-icon="plus">Add Entry</a>
        </li>
        <li>
          <a href="#entries" class="ui-btn-active ui-state-persist" data-role="tab" data-icon="bars">List Entries</a>
        </li>
        <li>
          <a href="#map" data-role="tab" data-icon="location">Map</a>
        </li>
      </ul>
    </nav>
  </footer>
</article>
<!-- End Entry Details -->

<!-- Add Map -->
<article id="map" role="document" aria-live="assertive" aria-atomic="true" data-role="page">
  <header id="maptitle" class="page_header" role="banner" data-role="header" data-theme="b" data-position="fixed">
    <div class="logo">
      <img src="res/logo.png" alt="I'm a Tourist Logo"/>
    </div>
    <div>
      <h1>I'm a Tourist!</h1>
    </div>
  </header>

  <section id="mapPos" role="application" data-role="content">
    <!-- Content is dynamically added -->
    <h2 id="map-error">Map could not be loaded.</h2>
  </section>

  <footer data-role="footer" data-position="fixed" data-theme="b">
    <nav data-role="navbar">
      <ul>
        <li>
          <a href="#home_page" data-role="tab" data-icon="home">Home</a>
        </li>
        <li>
          <a href="#add" data-role="tab" data-icon="plus">Add Entry</a>
        </li>
        <li>
          <a href="#entries" data-role="tab" data-icon="bars">List Entries</a>
        </li>
        <li>
          <a href="#map" class="ui-btn-active ui-state-persist" data-role="tab" data-icon="location">Map</a>
        </li>
      </ul>
    </nav>
  </footer>
</article>
<!-- End Map -->

</body>
</html>
